name: stanley-racing-v2
region: sgp

services:
- name: web
  source_dir: happy-valley-model
  dockerfile_path: Dockerfile.web
  github:
    repo: Bowside3110/stanley
    branch: main
    deploy_on_push: true
  http_port: 8080
  run_command: uvicorn web.main:app --host 0.0.0.0 --port 8080
  instance_count: 1
  instance_size_slug: basic-xxs
  envs:
  - key: USE_POSTGRES
    value: "true"
  - key: DATABASE_URL
    value: ${db.DATABASE_URL}
  - key: JWT_SECRET_KEY
    type: SECRET
  - key: SMTP_SERVER
    value: "smtp.gmail.com"
  - key: SMTP_PORT
    value: "587"
  - key: SMTP_USERNAME
    type: SECRET
  - key: SMTP_PASSWORD
    type: SECRET
  - key: ALERT_EMAIL
    value: "adamsalistair1978@gmail.com"

databases:
- name: db
  engine: PG
  production: false
  cluster_name: stanley-dbase
